"use strict";function _classCallCheck(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,o){for(var t,e=0;e<o.length;e++)t=o[e],t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}return function(o,t,e){return t&&a(o.prototype,t),e&&a(o,e),o}}();!function(a){a.module("alt.importacao-csv",["alt.modal-service","alt.select-service","alt.alerta-flutuante","alt.carregando-info"]).constant("AltImportacaoCsvEvento",{modal:{ABRE_MODAL_IMPORTACAO_ESPECIFICA:"alt-importacao-csv:abrir_modal_importacao_especifica"}}).constant("latinize",latinize).constant("_",_).constant("moment",moment).constant("XLS",XLS).constant("XLSX",XLSX)}(angular),function(a){a.module("alt.importacao-csv").service("AltImportacaoCsvEspecificaService",["$rootScope","AltImportacaoCsvEvento",function(a,o){this.exibe=function(t){a.$broadcast(o.modal.ABRE_MODAL_IMPORTACAO_ESPECIFICA,t)}}]).directive("altImportacaoCsvEspecifica",[function(){return{restrict:"A",replace:!0,template:'\n  <div class="modal fade"\n    id="alt-importacao-csv-modal"\n    role="dialog"\n    aria-hidden="true">\n\n    <div class="modal-dialog modal-lg modal-xl-custom">\n      <div class="modal-content">\n\n        <div class="modal-header alt-cor-principal">\n          <button type="button" class="close" data-dismiss="modal">\n            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>\n          </button>\n\n          <h3 class="modal-title">\n            {{!importacaoCsvCtrl.visualizacao ? \'Nova\' : \'Detalhes da\'}}\n            importação - <span>{{importacaoCsvCtrl.labelTipo}}</span></h3>\n        </div>\n        <div class="alt-importacao-csv-wizard-menu">\n          <div class="modal-body" ng-hide="importacaoCsvCtrl.visualizacao">\n            <div class="row">\n              <div ng-repeat="step in importacaoCsvCtrl.steps" \n                      class="col-xs-4 text-center alt-importacao-csv-step-title-wrap" \n                      ng-hide="step.menuHidden">\n                <div class="row">\n                  <div class="col-xs-12">\n                    <button type="button" class="alt-importacao-csv-step-title" \n                      ng-class="{\n                        \'alt-importacao-csv-step-title-completed\': step.completed, \n                        \'alt-importacao-csv-step-title-active\': step.active,\n                        \'alt-importacao-csv-step-title-invalid\': !step.valid}">\n                        {{step.number}}\n                    </button>\n                  </div>\n                </div>\n                <div class="row">\n                  <div class="col-xs-12 alt-importacao-csv-step-subtitle"\n                    ng-class="{\n                      \'alt-importacao-csv-step-subtitle-completed\': step.completed, \n                      \'alt-importacao-csv-step-subtitle-active\': step.active,\n                      \'alt-importacao-csv-step-subtitle-invalid\': !step.valid}">\n                    <span class="text-uppercase text-center">{{step.name}}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-xs-12 alt-importacao-csv-progress-wrapper">\n                <uib-progressbar class="progress-striped" value="importacaoCsvCtrl.progress" type="info">\n                </uib-progressbar>\n              </div>\n            </div>\n          </div>\n\n        </div>\n        <div class="alt-importacao-csv-wrapper">\n          <div ng-show="importacaoCsvCtrl.steps[0].active"\n            class="alt-importacao-csv-wizard-step">\n            <div class="modal-body">\n              <form name="importacaoCsvCtrl.formStepOne">\n                <div class="row">\n                  <div class="col-xs-12">\n                    <div class="alt-importacao-csv-wizard-title" ng-bind="importacaoCsvCtrl.getTitle()"></div>\n                    <p class="alt-importacao-csv-wizard-obs alt-espacamento-top" ng-bind-html="importacaoCsvCtrl.getMessage()"><p>\n                    <div class="alt-espacamento-top clearfix">\n                        <div class="col-xs-12 col-sm-4 col-sm-offset-4 anexos-input-file-escondido-container text-center">\n                          <button type="button" class="btn btn-block btn-default alt-espacamento-bottom alt-espacamento-top anexos-input-file-fake">\n                            Selecionar arquivo\n                          </button>\n                          <span class="small microcopy text-muted">Tamanho máximo: 2MB ou 3.000 registros</span>\n\n                          <input type="file" class="anexos-input-file-real alt-hand ng-isolate-scope" \n                            ng-model="importacaoCsvCtrl.arquivo" \n                            id="alt-importacao-csv-input-file-step1"\n                            accept=".xls,.xlsx,.csv,.ods"\n                            alt-importacao-csv-leitor\n                            data-opts="importacaoCsvCtrl.arquivoOpcoes"\n                            ng-change="importacaoCsvCtrl.arquivoAlterado()"\n                            required>\n                        </div>\n                    </div>\n                    <div class="text-center">\n                        <span ng-show="importacaoCsvCtrl.arquivo.valido" class="text-success alt-importacao-csv-input-ckeck">\n                          <i class="fa fa-check-circle"></i>&nbsp; {{importacaoCsvCtrl.arquivo.nome}}\n                        </span>\n                        <span ng-show="!!importacaoCsvCtrl.arquivo && !importacaoCsvCtrl.arquivo.valido" \n                          class="text-danger alt-importacao-csv-input-ckeck">\n                          <i class="fa fa-times-circle"></i>&nbsp; {{importacaoCsvCtrl.arquivo.mensagem}}\n                        </span>\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n          <div ng-show="importacaoCsvCtrl.steps[1].active"\n            class="alt-importacao-csv-wizard-step">\n            <div class="modal-body">\n              <div class="row">\n                <div class="col-xs-12">\n                  <div class="alt-importacao-csv-wizard-title" ng-bind="importacaoCsvCtrl.getTitle()"></div>\n                  <div class="alt-espacamento-bottom" ng-bind-html="importacaoCsvCtrl.getMessage()"></div>\n                </div>\n              </div>\n \n              <div class="row">\n                <div class="col-xs-12 alt-espacamento-top">\n                  <div class="alt-importacao-csv-planilha-mapeamento">\n                    <table class="table">\n                      <thead>\n                        <tr>\n                          <th ng-repeat="coluna in importacaoCsvCtrl.importacao.colunas" ng-class="{\'alt-importacao-csv-coluna-possui-campo-mapeado\': !!coluna.campos && coluna.campos.length}">\n                            <select class="alt-importacao-csv-select-field"\n                              name="field"\n                              data-placeholder="Selecione"\n                              ng-model="coluna.campoSelecionado"\n                              ng-change="importacaoCsvCtrl.vincular(coluna.campoSelecionado, coluna.numero)"\n                              ng-options="campo.chave as campo.nome for campo in importacaoCsvCtrl.importacao.campos | filter: importacaoCsvCtrl.campoNaoMapeado track by campo.chave">\n                              <option value=""></option>\n                            </select>\n                          </th>\n                        </tr>\n                      </thead>\n                      <thead>\n                        <tr>\n                          <th ng-repeat="coluna in importacaoCsvCtrl.importacao.colunas" ng-class="{\'alt-importacao-csv-coluna-possui-campo-mapeado\': !!coluna.campos && coluna.campos.length}">\n                            <span class="small"><i ng-show="coluna.campos.length == 0">Nenhum campo selecionado</i></span>\n\n                            <div ng-repeat="c in coluna.campos" class="alt-importacao-csv-lb-campo-mapeado">\n                              <b>{{c.nome}}</b>\n                              <span ng-click="importacaoCsvCtrl.desvincular(c.chave)" title="Desvincular">\n                                <i class="fa fa-times"></i>\n                              </span>\n                            </div>\n\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody class="cabecalho-planilha" ng-show="importacaoCsvCtrl.arquivoOpcoes.colunasPossuemTitulos">\n                        <tr>\n                          <td ng-repeat="coluna in importacaoCsvCtrl.importacao.colunas">\n                            {{coluna.nome}}\n                          </td>\n                        </tr>\n                      </tbody>\n                      <tbody>\n                        <tr ng-repeat="linha in importacaoCsvCtrl.arquivo.dezPrimeirasLinhas">\n                          <td ng-repeat="coluna in importacaoCsvCtrl.arquivo.colunas track by $index" \n                            ng-class="{\'alt-importacao-csv-coluna-possui-campo-mapeado\': !!importacaoCsvCtrl.importacao.colunas[$index].campos && importacaoCsvCtrl.importacao.colunas[$index].campos.length}">\n                            {{ linha[coluna] }}\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n\n              <div class="row">\n                <div class="col-xs-12 alt-espacamento-bottom">\n                  <label class="alt-hand alt-espacamento-top" ng-show="importacaoCsvCtrl.arquivo.linhas.length > 1">\n                    <input type="checkbox"\n                        ng-model="importacaoCsvCtrl.arquivoOpcoes.colunasPossuemTitulos"/>\n                    <span class="alt-checkbox"></span> <span class="alt-checkbox-label">Primeira linha do arquivo são títulos das colunas</span>\n                  </label>\n                </div> \n              </div>\n\n              <div class="row">\n                <div class="col-xs-12 alt-importacao-csv-map-warnings">\n                  <p ng-repeat="campo in importacaoCsvCtrl.importacao.campos" ng-if="campo.vinculoRequisitado">\n                    <i class="fa fa-exclamation-triangle"></i> \n                    <span>O campo <b>{{campo.nome}}</b> do ERP4ME deve ser vinculado a uma coluna do arquivo.</span>\n                  </p>\n                </div>\n              </div>\n\n            </div>\n          </div>\n          <div ng-show="importacaoCsvCtrl.steps[2].active"\n            class="alt-importacao-csv-wizard-step">\n            <div class="modal-body">\n              <div class="row">\n                <div class="col-xs-12">\n                  <div class="alt-importacao-csv-wizard-title" ng-bind="importacaoCsvCtrl.getTitle()"></div>\n                  <div class="alt-espacamento-bottom" ng-bind-html="importacaoCsvCtrl.getMessage()"></div>\n                </div>\n              </div>\n              \n              <div class="row alt-espacamento-top">\n                <div class="col-xs-12 alt-importacao-csv-rules-field" \n                  ng-repeat="campo in importacaoCsvCtrl.importacao.campos track by campo.chave" \n                  ng-if="campo.tipo.name === \'Object\'"\n                  ng-hide="\n                    (importacaoCsvCtrl.resumoRegrasDeValor.exibir === \'regras\' && campo.resumoRegrasDeValor.vinculados === 0) ||\n                    (importacaoCsvCtrl.resumoRegrasDeValor.exibir === \'nulosInvalidos\' && campo.resumoRegrasDeValor.nulosInvalidos === 0) ||\n                    (importacaoCsvCtrl.resumoRegrasDeValor.exibir === \'nulosValidos\' && campo.resumoRegrasDeValor.nulosValidos === 0)">\n                  <div class="row alt-espacamento-top">\n                    <div class="col-xs-12">\n                      <label ng-show="importacaoCsvCtrl.obterQtdCamposRegras(importacaoCsvCtrl.importacao.campos) > 1" class="alt-importacao-csv-rules-title" data-toggle="collapse" data-target="#alt-importacao-csv-rules-field-{{campo.chave}}">\n                        <i class="fa fa-angle-down"></i>\n                        {{campo.nome}} \n                        <span ng-show="!!campo.coluna && importacaoCsvCtrl.arquivoOpcoes.colunasPossuemTitulos">(coluna {{importacaoCsvCtrl.nomeColuna(campo.coluna)}})</span>\n                      </label>\n                      <label ng-hide="importacaoCsvCtrl.obterQtdCamposRegras(importacaoCsvCtrl.importacao.campos) > 1"  class="alt-importacao-csv-rules-title no-alt-hand">\n                        {{campo.nome}} \n                        <span ng-show="!!campo.coluna && importacaoCsvCtrl.arquivoOpcoes.colunasPossuemTitulos">(coluna {{importacaoCsvCtrl.nomeColuna(campo.coluna)}})</span>\n                      </label>\n                    </div>\n                  </div>\n                  <div class="alt-importacao-csv-rule-table-overflow">\n                  <div class="row alt-espacamento-bottom collapse in" id="alt-importacao-csv-rules-field-{{campo.chave}}">\n                    <div class="col-xs-12 alt-importacao-csv-rule-table">\n                      <table class="table table-responsive table-condensed table-striped">\n                        <thead>\n                          <tr>\n                            <th class="status"></th>\n                            <th>Informação arquivo</th>\n                            <th>Ocorrências</th>\n                            <th>Informação ERP4ME</th>\n                            <th></th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <tr ng-repeat="regra in campo.regrasDeValor"\n                            ng-class="{\n                              \'rule-success\': regra.objeto,\n                              \'rule-warning\': !regra.objeto && !campo.obrigatorio,\n                              \'rule-error\': !regra.objeto && campo.obrigatorio}"\n                            ng-hide="\n                              (!regra.objeto && importacaoCsvCtrl.resumoRegrasDeValor.exibir === \'regras\') ||\n                              ((!regra.objeto && campo.obrigatorio || regra.objeto) && importacaoCsvCtrl.resumoRegrasDeValor.exibir === \'nulosValidos\') ||\n                              ((!regra.objeto && !campo.obrigatorio || regra.objeto) && importacaoCsvCtrl.resumoRegrasDeValor.exibir === \'nulosInvalidos\')">\n                            <td class="status">\n                              <i class="fa fa-exclamation-triangle text-warning" ng-show="!regra.objeto && campo.obrigatorio"></i>\n                              <i class="fa fa-check text-success" ng-show="regra.objeto"></i>\n                            </td>\n                            <td ng-hide="regra.geral">{{regra.valor}}</td>\n                            <td ng-show="regra.geral"><i class="text-secondary">Todas as ocorrências</i></td>\n                            <td class="alt-importacao-csv-rules-td-count-field">{{regra.quantidade}}</td>\n                            <td class="alt-importacao-csv-rules-td-select-field"\n                              style="min-width: 180px;">\n                              <select id="alt-importacao-csv-rules-select-{{campo.chave}}-{{$index}}"\n                                class="alt-importacao-csv-rules-select"\n                                style="width: 100%;"\n                                ng-model="regra.objeto"\n                                ng-change="importacaoCsvCtrl.resumirRegrasDeValor()"\n                                ng-options="{{importacaoCsvCtrl.ngOptionsRegraDeCampo(campo)}}">\n                              </select>\n                            </td>\n                            <td class="alt-importacao-csv-rules-td-actions-field">\n                              <button type="button" class="btn btn-default pull-right" \n                                ng-disabled="!regra.objeto"\n                                ng-click="importacaoCsvCtrl.limparRegra(campo, $index)">\n                                Limpar\n                              </button>\n                            </td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div ng-show="importacaoCsvCtrl.steps[3].active"\n            class="alt-importacao-csv-wizard-step alt-espacamento-bottom">\n            <div class="modal-body">\n              \n              <div class="row">\n                <div class="col-md-8">\n                  <span class="small text-muted">Arquivo: </span> {{ importacaoCsvCtrl.lote.nomeArquivo }}\n                </div>\n                <div class="col-md-4">\n                  <span class="small text-muted">Status: </span> {{ (importacaoCsvCtrl.lote.status > 0 ? \'processado\' : \'processando\') }}\n                </div>\n              </div>\n              \n              <hr style="margin-top: 15px; margin-bottom: 10px;">\n              \n              <div class="row">\n                <div class="col-sm-12 alt-espacamento-bottom">\n                  <div class="alt-importacao-registros-total"><span class="small text-muted">Total de registros: </span> {{ importacaoCsvCtrl.lote.itens.length }}</div>\n                  <div class="alt-importacao-registros-sucesso"><span class="small text-muted">Registros importados: </span> <span class="text-success">{{ importacaoCsvCtrl.lote.validos }}</span></div>\n                  <div class="alt-importacao-registros-erro"><span class="small text-muted">Registros não importados: </span> <span class="text-danger">{{ importacaoCsvCtrl.lote.erros }}</span></div>\n                  <div class="alt-importacao-registros-conflito"><span class="small text-muted">Registros importados com observação: </span> <span class="text-warning">{{ importacaoCsvCtrl.lote.conflitos }}</span></div>\n                </div>\n              </div>\n\n              <ul class="nav nav-tabs row alt-importacao-nav-tabs" role="tablist">\n                <li role="presentation" ng-show="!!importacaoCsvCtrl.itensNaoImportados.length" ng-class="{\'active\': !!importacaoCsvCtrl.itensNaoImportados.length}" koopon-comum-toggle-aba toggle="#koopon-importacao-nao-importados" contexto="#alt-importacao-csv-modal">\n                  <a href="">Registros não importados</a>\n                </li>\n                <li role="presentation" ng-show="!!importacaoCsvCtrl.itensImportadosComObservacao.length" ng-class="{\'active\': !importacaoCsvCtrl.itensNaoImportados.length}" koopon-comum-toggle-aba toggle="#koopon-importacao-importados-observacao" contexto="#alt-importacao-csv-modal">\n                  <a href="">Importados com observação</a>\n                </li>\n              </ul>\n\n              <div class="tab-content">\n                <div role="tabpanel" class="tab-pane" ng-class="{\'active\': !!importacaoCsvCtrl.itensNaoImportados.length}" id="koopon-importacao-nao-importados">\n\n                  <div class="alt-sombra-secundaria">\n                    <div class="" ng-repeat="item in importacaoCsvCtrl.itensNaoImportados">\n\n                      <div class="alt-importacao-csv-report">\n                        <div class="alt-importacao-csv-report-row-body row-body-{{ $index % 2 === 0 ? \'par\' : \'impar\' }}">\n                          <div class="row hidden-xs hidden-sm" ng-if="$first">\n                            <div ng-repeat="campo in importacaoCsvCtrl.camposOrdenados" class="col-md-{{ campo.template.width }} alt-importacao-csv-report-title">{{ campo.nome }}</div>\n                            <div class="col-md-1 alt-importacao-csv-report-title text-center">Status</div>\n                            <div class="col-md-1 alt-importacao-csv-report-title">&nbsp;</div>\n                          </div>\n\n                          <div class="row">\n                            <div ng-repeat="campo in importacaoCsvCtrl.camposOrdenados" class="col-md-{{ campo.template.width }} alt-importacao-csv-report-row">\n                              <span class="small text-muted visible-xs-inline-block visible-sm-inline-block">{{ campo.nome }}:</span> {{ importacaoCsvCtrl.obterValorCampoProp(item.objeto, campo.tplProp) }}\n                            </div>\n                            <div class="col-xs-9 col-sm-9 col-md-1 alt-importacao-csv-report-row alt-importacao-csv-report-row-status" ng-switch="item.status">\n                              <span class="small text-muted visible-xs-inline-block visible-sm-inline-block">Status:</span> \n                              <i ng-switch-default class="fa fa-clock-o" aria-hidden="true"></i>\n                              <i ng-switch-when="1" class="fa fa-check-circle text-success" aria-hidden="true"></i>\n                              <i ng-switch-when="2" class="fa fa-times-circle text-danger" aria-hidden="true"></i>\n                              <i ng-switch-when="3" class="fa fa-exclamation-triangle text-warning" aria-hidden="true"></i>\n                              <span ng-switch-when="2" class="visible-xs-inline-block visible-sm-inline-block"> não importado</span>\n                              <span ng-switch-when="3" class="visible-xs-inline-block visible-sm-inline-block"> importado com observação</span>\n                            </div>\n                            <div class="col-xs-3 col-sm-3 col-md-1 alt-importacao-csv-report-row" ng-init="item.collapse = true">\n                              <button class="btn btn-sm btn-default pull-right alt-importacao-csv-report-row-button" ng-click="item.collapse = !item.collapse">\n                                <i ng-class="{\'fa fa-angle-down\': item.collapse, \'fa fa-angle-up\': !item.collapse }"></i>\n                              </button>\n                            </div>\n                          </div>\n                          \n                          <div ng-show="!item.collapse" class="alt-importacao-csv-report-row-detalhes">\n                          \n                            <div class="row">\n                              <div class="col-md-12 alt-importacao-csv-report-row-head">\n                                <div class="alt-importacao-csv-report-row-head-title text-muted">Registro {{item.linha}}</div>\n                                <div class="alert alert-sm alert-danger" ng-bind-html="importacaoCsvCtrl.obterMensagemErro(item.mensagemErro)"></div>\n                              </div>\n                            </div>\n\n                            <hr>\n                \n                            <div class="row">\n                              <div class="col-sm-6" ng-repeat="campo in importacaoCsvCtrl.campos" >\n                                <span class="small text-muted"><strong>{{ campo.nome }}:</strong></span> <span>{{ importacaoCsvCtrl.obterValorCampoProp(item.objeto, campo.tplProp) }}</span>\n                              </div>\n                            </div>\n                          </div>\n\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                \n                <div role="tabpanel" class="tab-pane" ng-class="{\'active\': !importacaoCsvCtrl.itensNaoImportados.length}" id="koopon-importacao-importados-observacao">\n\n                  <div class="alt-sombra-secundaria">\n                    <div class="" ng-repeat="item in importacaoCsvCtrl.itensImportadosComObservacao">\n\n                      <div class="alt-importacao-csv-report">\n                        <div class="alt-importacao-csv-report-row-body row-body-{{ $index % 2 === 0 ? \'par\' : \'impar\' }}">\n                          <div class="row hidden-xs hidden-sm" ng-if="$first">\n                            <div ng-repeat="campo in importacaoCsvCtrl.camposOrdenados" class="col-md-{{ campo.template.width }} alt-importacao-csv-report-title">{{ campo.nome }}</div>\n                            <div class="col-md-1 alt-importacao-csv-report-title text-center">Status</div>\n                            <div class="col-md-1 alt-importacao-csv-report-title">&nbsp;</div>\n                          </div>\n\n                          <div class="row">\n                            <div ng-repeat="campo in importacaoCsvCtrl.camposOrdenados" class="col-md-{{ campo.template.width }} alt-importacao-csv-report-row">\n                              <span class="small text-muted visible-xs-inline-block visible-sm-inline-block">{{ campo.nome }}:</span> {{ importacaoCsvCtrl.obterValorCampoProp(item.objeto, campo.tplProp) }}\n                            </div>\n                            <div class="col-xs-9 col-sm-9 col-md-1 alt-importacao-csv-report-row alt-importacao-csv-report-row-status" ng-switch="item.status">\n                              <span class="small text-muted visible-xs-inline-block visible-sm-inline-block">Status:</span> \n                              <i ng-switch-default class="fa fa-clock-o" aria-hidden="true"></i>\n                              <i ng-switch-when="1" class="fa fa-check-circle text-success" aria-hidden="true"></i>\n                              <i ng-switch-when="3" class="fa fa-times-circle text-danger" aria-hidden="true"></i>\n                              <i ng-switch-when="2" class="fa fa-exclamation-triangle text-warning" aria-hidden="true"></i>\n                              <span ng-switch-when="2" class="visible-xs-inline-block visible-sm-inline-block"> não importado</span>\n                              <span ng-switch-when="3" class="visible-xs-inline-block visible-sm-inline-block"> importado com observação</span>\n                            </div>\n                            <div class="col-xs-3 col-sm-3 col-md-1 alt-importacao-csv-report-row" ng-init="item.collapse = true">\n                              <button class="btn btn-sm btn-default pull-right alt-importacao-csv-report-row-button" ng-click="item.collapse = !item.collapse">\n                                <i ng-class="{\'fa fa-angle-down\': item.collapse, \'fa fa-angle-up\': !item.collapse }"></i>\n                              </button>\n                            </div>\n                          </div>\n                          \n                          <div ng-show="!item.collapse" class="alt-importacao-csv-report-row-detalhes">\n                          \n                            <div class="row">\n                              <div class="col-md-12 alt-importacao-csv-report-row-head">\n                                <div class="alt-importacao-csv-report-row-head-title text-muted">Registro {{item.linha}}</div>\n                                <div class="alert alert-sm alert-warning" ng-bind-html="importacaoCsvCtrl.obterMensagemErro(item.mensagemErro)"></div>\n                              </div>\n                            </div>\n\n                            <hr>\n                \n                            <div class="row">\n                              <div class="col-sm-6" ng-repeat="campo in importacaoCsvCtrl.campos" >\n                                <span class="small text-muted"><strong>{{ campo.nome }}:</strong></span> <span>{{ importacaoCsvCtrl.obterValorCampoProp(item.objeto, campo.tplProp) }}</span>\n                              </div>\n                            </div>\n                          </div>\n\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                </div>\n              </div>\n\n            </div>\n          </div>\n        </div>\n        <div class="modal-footer" ng-hide="importacaoCsvCtrl.visualizacao">\n          <button type="button" class="btn btn-default pull-left" \n            ng-click="importacaoCsvCtrl.prevStep()"\n            ng-hide="importacaoCsvCtrl.steps[0].active">\n            <i class="fa fa-long-arrow-left"></i>&nbsp; Anterior\n          </button>\n\n          <button type="button" class="btn btn-primary"\n            ng-hide="importacaoCsvCtrl.steps[2].active"\n            ng-disabled="importacaoCsvCtrl.invalidStep()"\n            ng-click="importacaoCsvCtrl.nextStep()">\n            Próximo &nbsp;<i class="fa fa-long-arrow-right"></i>\n          </button>\n          <button type="button" class="btn btn-primary"\n            ng-show="importacaoCsvCtrl.steps[2].active"\n            ng-disabled="importacaoCsvCtrl.invalidStep()"\n            ng-click="importacaoCsvCtrl.salvarImportacao()">\n            Importar\n          </button>\n          <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>\n        </div>\n        <div class="modal-footer" ng-show="importacaoCsvCtrl.visualizacao">\n          <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>\n        </div>\n      </div>\n    </div>\n  </div>',scope:{},controller:["$rootScope","$scope","$sce","$timeout","AltModalService","AltSelectService","AltAlertaFlutuanteService","AltImportacaoCsvCampoModel","AltImportacaoCsvLoteModel","AltImportacaoCsvModel","AltImportacaoCsvEvento","AltCarregandoInfoService",function(o,t,e,i,s,r,n,l,c,p,m,v){var d=this,u="#alt-importacao-csv-modal",h="#alt-importacao-csv-rules-select",g="#alt-importacao-csv-btn-group-rules",b=".alt-importacao-csv-select-field",f=function(a,o){var t=$(a).find('input[type="radio"]');t.removeAttr("checked"),t.parent("label").removeClass("active"),$(t[o]).attr("checked","checked"),$(t[o]).parent("label").addClass("active")},C=function(){d.importacao?(d.arquivo.colunas.map(function(a,o){d.importacao.colunas[o].nome=a}),d.arquivoAnterior=a.copy(d.arquivo)):(d.importacao=new p(d.campos),d.arquivo.colunas.map(function(a,o){d.importacao.adicionarColuna(a,o)})),d.importacao.validarMapa(),r.inicializar(b)},w=function(){d.resumoRegrasDeValor=d.importacao.aplicarRegrasDeValor(d.arquivo.linhas),d.importacao.campos.forEach(function(a){a.tipo===Object&&a.regrasDeValor.forEach(function(o,t){var e=h+"-"+a.chave+"-"+t;a.objetoCriarNovo?d.inicializarComboComOpcaoCriarNovo(e,a.chave,t):r.inicializar(e)})}),d.resumoRegrasDeValor.exibir="todos",f(g,0)},x=function(a){d.visualizacao=!0,d.steps[0].active=!1,d.steps[3].active=!0,a.itens.forEach(function(a){2===a.status&&d.itensNaoImportados.push(a),3===a.status&&d.itensImportadosComObservacao.push(a)}),d.lote=new c(a),d.lote.resumir()},y=function(o){d.labelTipo=o.labelTipo,d.labelTipoSingular=o.labelTipoSingular,d.validarLote=o.validarLote,d.gravarLote=o.gravarLote,d.eventoCriacao=o.eventoCriacao,d.campos=a.copy(o.campos),d.camposConfigurados=a.copy(o.campos),d.arquivoAnterior=null,d.arquivo=null,d.arquivoOpcoes={colunasPossuemTitulos:!1},d.colunasSelecao=null,d.lote=null,d.visualizacao=!1,d.importacao=void 0,d.resumoRegrasDeValor=void 0,d.itensNaoImportados=[],d.itensImportadosComObservacao=[],d.steps=[{name:"Passo 1",number:1,active:!0,progress:16.65,init:null,title:"Importar dados",message:e.trustAsHtml("Selecione o arquivo para importação com extensão xls, xlsx, ods ou csv")},{name:"Passo 2",number:2,active:!1,progress:49.95,init:C,title:"Configurar importação",message:e.trustAsHtml("Selecione o(s) campo(s) do ERP4ME correspondente(s) a cada coluna do arquivo para realizar a importação")},{name:"Passo 3",number:3,active:!1,progress:83.28,init:w,title:"Configurar Tipo de pessoa",message:e.trustAsHtml("Vincule a informação do arquivo ao <em>Tipo de pessoa</em> correspondente no cadastro do ERP4ME")},{name:"Visualização",number:4,active:!1,progress:100,
init:null,title:"",message:e.trustAsHtml("Existem registros não importados para o sistema, verifique as mensagens"),menuHidden:!0}],d.progress=d.steps[0].progress,d.camposOrdenados=d.gerarCamposOrdenadosListaVisualizacao(o.campos),!o.visualizacao||x(o.loteProcessado)};d.getTitle=function(){return d.steps&&d.steps.length?d.steps.find(function(a){return!0===a.active}).title:""},d.getMessage=function(){return d.steps&&d.steps.length?d.steps.find(function(a){return!0===a.active}).message:""},d.nextStep=function(){v.exibe(),i(function(){var a=_.findIndex(d.steps,{active:!0}),o=d.steps[a],t=d.steps[a+1];o.active=!1,o.completed=!0,t.active=!0,d.progress=t.progress,t.init(),v.esconde()},200)},d.prevStep=function(){var a=_.findIndex(d.steps,{active:!0});d.steps[a].active=!1,d.steps[a].completed=!1,d.steps[a-1].active=!0,d.progress=d.steps[a-1].progress},d.reloadStep=function(a){var o=d.steps[a];!o||!o.init||o.init()},d.invalidStep=function(){var a=_.findIndex(d.steps,{active:!0});return 0===a?!d.arquivo||!d.arquivo.valido:1===a?d.importacao.mapaInvalido:2===a?0<d.resumoRegrasDeValor.nulosInvalidos:!(3!==a)&&d.lote&&0!==d.lote.erros},d.vincular=function(a,o){d.importacao.vincular(a,o),r.inicializar(b)},d.desvincular=function(a){d.importacao.desvincular(a),r.inicializar(b)},d.campoNaoMapeado=function(o){return a.isUndefined(o.coluna)},d.resumirRegrasDeValor=function(){a.extend(d.resumoRegrasDeValor,d.importacao.resumirRegrasDeValor()),"nulosValidos"===d.resumoRegrasDeValor.exibir&&0===d.resumoRegrasDeValor.nulosValidos&&(d.resumoRegrasDeValor.exibir="todos",f(g,0)),"nulosInvalidos"===d.resumoRegrasDeValor.exibir&&0===d.resumoRegrasDeValor.nulosInvalidos&&(d.resumoRegrasDeValor.exibir="todos",f(g,0))},d.permiteAlteracaoArquivo=function(){var a=_.findIndex(d.steps,{active:!0});return 2===a||3===a},d.arquivoAlterado=function(){var o=_.findIndex(d.steps,{active:!0}),t=0===o;return!d.arquivoAnterior||d.arquivoAnterior.nome===d.arquivo.nome||t?(!d.arquivoAnterior||d.arquivoAnterior.nome===d.arquivo.nome||(d.importacao=void 0),t&&!!d.arquivoAnterior&&d.arquivoAnterior.nome!==d.arquivo.nome&&(d.campos=a.copy(d.camposConfigurados)),1===o?void C():(2===o&&d.campos.forEach(function(a){a.regrasDeValor=void 0}),3===o&&(d.lote=void 0),d.arquivoAnterior=a.copy(d.arquivo),void d.reloadStep(o))):(d.arquivo=a.copy(d.arquivoAnterior),n.exibe({msg:"O nome do documento deve coincidir com o do arquivo da importação."}))},d.criarNovoObjetoDeRegra=function(a,o){s.close(u),i(function(){var e=_.find(d.importacao.campos,{chave:a});!e.objetoCriarNovo||!e.objetoCriarNovo.funcao||(e.objetoCriarNovo.funcao(),e.atribuirNovoARegra=o,t.$on(e.objetoCriarNovo.eventoAtualizacao,function(a,o){void 0!==e.atribuirNovoARegra&&(s.open(u),i(function(){e.regrasDeValor[e.atribuirNovoARegra].objeto=o;var a=h+"-"+e.chave+"-"+e.atribuirNovoARegra;d.inicializarComboComOpcaoCriarNovo(a,e.chave,e.atribuirNovoARegra),e.atribuirNovoARegra=void 0,d.resumirRegrasDeValor()},200))}))},200)},d.limparRegra=function(a,o){var t=a.regrasDeValor[o];t.objeto=void 0;var e=h+"-"+a.chave+"-"+o;a.objetoCriarNovo?d.inicializarComboComOpcaoCriarNovo(e,a.chave,o):r.inicializar(e),d.resumirRegrasDeValor()},d.inicializarComboComOpcaoCriarNovo=function(a,o,e){i(function(){r.inicializarComOpcaoCriarNovo(a,{escopo:t,strMetodo:"importacaoCsvCtrl.criarNovoObjetoDeRegra('"+o+"', "+e+")"},{})})},d.salvarImportacao=function(){v.exibe(),i(function(){var t=d.importacao.montarLote(d.arquivo.linhas,d.arquivo.nome,d.lote);d.validarLote(t).then(function(t){d.lote=t,d.lote.exibir="todos";var e=a.copy(d.lote);return d.gravarLote(e).then(function(t){d.arquivo=null,d.arquivoOpcoes.colunasPossuemTitulos=void 0,a.element(".anexos-input-file-real").val(""),a.element(".anexos-input-file-real")[0]=null,s.close(u),o.$broadcast(d.eventoCriacao,t)}),!0})},200)},d.editarObjeto=function(a){"function"==typeof a.editar&&(s.close(u),a.editar(a.idObjeto,a.objeto),t.$on(a.eventoEdicaoConcluida,function(){s.open(u)}))},d.nomeColuna=function(a){var o=_.find(d.importacao.colunas,{numero:a});return o?o.nome:""},d.ngOptionsRegraDeCampo=function(a){var o="",t="";return!a.objetoOpcoesListagem.groupBy||(o="group by obj[campo.objetoOpcoesListagem.groupBy] "),!!a.objetoOpcoesListagem.orderBy&&$.isArray(a.objetoOpcoesListagem.orderBy)&&(t="| orderBy:["+_.map(a.objetoOpcoesListagem.orderBy,function(a){return"'"+a+"'"}).toString()+"]"),"obj as obj[campo.objetoReferencia] "+o+" for obj in campo.objetoListagem() "+t+" track by obj[campo.objetoChave]"},d.obterQtdCamposRegras=function(a){return a.filter(function(a){return"Object"===a.tipo.name}).length},d.gerarCamposOrdenadosListaVisualizacao=function(a){var o=a.filter(function(a){return 0<a.exibirNaVisualizacaoListaPosicao});return _.sortBy(o,"exibirNaVisualizacaoListaPosicao")},d.obterValorCampoProp=function(a,o){if("undefined"==typeof a)return!1;var t=o.indexOf(".");return-1<t?d.obterValorCampoProp(a[o.substring(0,t)],o.substr(t+1)):a[o]},d.obterMensagemErro=function(a){return e.trustAsHtml(a)},t.$on(m.modal.ABRE_MODAL_IMPORTACAO_ESPECIFICA,function(a,o){y(o),s.open(u)})}],controllerAs:"importacaoCsvCtrl"}}])}(angular),function(a){a.module("alt.importacao-csv").directive("altImportacaoCsvLeitor",["XLS","XLSX","AltCarregandoInfoService",function(o,t,e){return{require:"ngModel",scope:{opts:"="},link:function(i,s,r,n){function l(a,t){var e={};return a.SheetNames.forEach(function(i){var s=o.utils.sheet_to_row_object_array(a.Sheets[i],t);0<s.length&&(e[i]=s)}),e}function c(a){return a.substring(a.lastIndexOf(".")+1,a.length).toLowerCase()}function p(a){return!("xls"!==a&&"xlsx"!==a&&"csv"!==a&&"ods"!==a)}function m(a){var o=[];if(!a)return o;var e,s=t.utils.decode_range(a["!ref"]),r=s.s.r;for(e=s.s.c;e<=s.e.c;++e){var n="";if(i.opts&&i.opts.colunasPossuemTitulos){var l=a[t.utils.encode_cell({c:e,r:r})];l&&l.t&&(n=t.utils.format_cell(l))}else n="coluna "+(e+1);o.push(n)}return o}function v(a,o){var t={};!i.opts||i.opts.colunasPossuemTitulos||!o||!o.length||(t.header=o);var e=l(a,t);return e[Object.keys(e)[0]]}function d(o){var r=new FileReader;e.exibe(),r.onload=function(r){var l=void 0,d=void 0,f=[],C=[];i.path=i.path?i.path:a.element(s[0]).val();var w=i.path?i.path.split("\\")[2]:"",x=c(w),y=o.size,j=!0,V="";p(x)?y>u?(j=!1,V="O tamanho máximo de arquivo permitido é de "+h):(l=r.target.result,d=t.read(l,{type:"binary"}),f=m(d.Sheets[d.SheetNames[0]]),C=v(d,f)):(j=!1,V="Selecione um arquivo válido, tipos permitidos: XLS, XLSX, CSV e ODS"),C.length>g&&(j=!1,V="Quantidade máxima de registros permitida é de "+b),i.dadosArquivo={colunas:f,linhas:C,dezPrimeirasLinhas:C.slice(0,10),nome:w,extensao:x,valido:j,mensagem:V},i.$apply(function(){n.$setViewValue(i.dadosArquivo),n.$render(),a.element(s).val(""),e.esconde()})},r.readAsBinaryString(o)}var u=2097152,h="2MB",g=3e3,b="3.000";i.dadosArquivo=null,i.file=null,i.path=null,s.on("change",function(a){e.exibe(),i.dadosArquivo=null,i.file=null,i.path=null,i.file=a.target.files[0],d(i.file)}),i.$watch("opts.colunasPossuemTitulos",function(o,t){(o||t)&&void 0!==o&&i.file?d(i.file):(i.dadosArquivo=void 0,a.element(s).val("")),void 0===o&&(i.file=null)})}}}])}(angular),function(a){a.module("alt.importacao-csv").factory("AltImportacaoCsvCampoModel",["$sce","$filter","moment","latinize",function(o,t,e,i){var s=function(){function s(o){_classCallCheck(this,s),this.nome="",this.chave="",this.obrigatorio=!1,this.dado="",this.coluna=void 0,this.valor=void 0,this.referencia=void 0,this.valido=!1,this.tipo=void 0,this.vinculoRequisitado=!1,this.template={},this.objetoChave=void 0,this.objetoListagem=void 0,this.objetoReferencia=void 0,this.objetoAutoVinculo=void 0,this.objetoCriarNovo=void 0,this.objetoOpcoesListagem={},this.mensagens=[],this.tplProp="",this.exibirNaVisualizacaoListaPosicao=0,a.extend(this,o),this._parseObrigatorio(),this._parseObjetoAutoVinculo(),this._parseTipo(),this._parseTemplate(),this._validarOpcoes()}return _createClass(s,[{key:"_validarOpcoes",value:function(){if(!this.nome)throw new Error('Parametro "nome" é obrigatório.');if(!this.chave)throw new Error('Parametro "chave" é obrigatório.');if(this.tipo===Object&&!this.objetoChave)throw new Error('Parametro "objetoChave" é obrigatório para campo Object.');if(this.tipo===Object&&!this.objetoReferencia)throw new Error('Parametro "objetoReferencia" é obrigatório para campo Object.');if(this.tipo===Object&&!this.objetoListagem)throw new Error('Parametro "objetoListagem" é obrigatório para campo Object.')}},{key:"_parseObrigatorio",value:function(){this.obrigatorio=!!this.obrigatorio}},{key:"_parseObjetoAutoVinculo",value:function(){var a=this;this.tipo!==Object||this.objetoAutoVinculo&&"function"==typeof this.objetoAutoVinculo||(this.objetoAutoVinculo=function(o){var t;return o&&(o=i(o.toLowerCase()),a.objetoListagem().forEach(function(e){if(i(e[a.objetoReferencia]).toLowerCase()===o)return void(t=e)})),t})}},{key:"_parseTipo",value:function(){this.tipo!==Object&&this.tipo!==Date&&this.tipo!==Boolean&&this.tipo!==Number&&(this.tipo=String)}},{key:"_parseTemplate",value:function(){this.template={width:"number"==typeof this.template.width?this.template.width:12,label:this.template.label?this.template.label:this.nome}}},{key:"_incluirMensagemValidacao",value:function(a){this.mensagens.push({textoHtml:o.trustAsHtml("O campo <u>"+this.template.label+"</u> "+a+".")})}},{key:"_validarObjeto",value:function(){if(this.regrasDeValor&&0<this.regrasDeValor.length){var a=_.find(this.regrasDeValor,{valor:this.dado});if(a&&a.objeto)this.valor=a.objeto,this.referencia=a.objeto[this.objetoReferencia];else{var o=_.find(this.regrasDeValor,{geral:!0});o&&o.objeto?(this.valor=o.objeto,this.referencia=o.objeto[this.objetoReferencia]):this._incluirMensagemValidacao(this.obrigatorio?"é obrigatório":"não possui regra")}}}},{key:"_validarData",value:function(){var a=e(this.dado,"DD/MM/YYYY");a.isValid()?(this.valor=a.toDate(),this.referencia=a.format("DD/MM/YYYY")):this._incluirMensagemValidacao("não é uma data válida")}},{key:"_validarTexto",value:function(){"string"==typeof this.dado&&255>=this.dado.length?(this.valor=this.dado,this.referencia=this.valor):this._incluirMensagemValidacao("não é um texto válido")}},{key:"_validarNumero",value:function(){this.dado=this.dado.toString().replace(",","."),$.isNumeric(this.dado)?(this.valor=parseFloat(this.dado),this.referencia=this.monetario?t("currency")(this.valor,"R$ "):this.valor):this._incluirMensagemValidacao("não é um número válido")}},{key:"_validarBoleano",value:function(){var a=i(this.dado.toString().toLowerCase());"0"===a||"false"===a||"nao"===a||"n"===a||"f"===a?(this.valor=!1,this.referencia="Não"):"1"===a||"true"===a||"sim"===a||"s"===a||"v"===a?(this.valor=!0,this.referencia="Sim"):this._incluirMensagemValidacao('não é um "verdadeiro ou falso" válido')}},{key:"validar",value:function(){switch(this.valor=void 0,this.referencia=void 0,this.mensagens=[],this.dado||(this.dado=""),this.tipo){case Object:this._validarObjeto();break;case Date:this._validarData();break;case String:this._validarTexto();break;case Number:this._validarNumero();break;case Boolean:this._validarBoleano()}this.valido=void 0!==this.valor}},{key:"possuiRegraGeral",value:function(){var a=_.find(this.regrasDeValor,{geral:!0});return!!a&&!!a.objeto}},{key:"possuiVinculoOuRegraGeral",value:function(){return!!this.coluna||this.possuiRegraGeral()}}]),s}();return s}])}(angular),function(a){a.module("alt.importacao-csv").factory("AltImportacaoCsvItemModel",["AltImportacaoCsvResumoItemModel",function(a){return function o(t){_classCallCheck(this,o),this.objeto={},this.resumo=new a(t),this.desconsiderado=!1,this.possuiErro=!1,this.possuiConflito=!1}}])}(angular),function(a){a.module("alt.importacao-csv").factory("AltImportacaoCsvLoteModel",[function(){var o=function(){function o(t){_classCallCheck(this,o),this.itens=[],this.processando=0,this.validos=0,this.erros=0,this.conflitos=0,this.nomeArquivo="",a.extend(this,t)}return _createClass(o,[{key:"resumir",value:function(){var a=this;this.processando=0,this.validos=0,this.erros=0,this.conflitos=0,this.itens.forEach(function(o){3===o.status?a.conflitos++:2===o.status?a.erros++:1===o.status?a.validos++:a.processando++})}}]),o}();return o}])}(angular),function(a){a.module("alt.importacao-csv").factory("AltImportacaoCsvModel",["$sce","$q","AltImportacaoCsvItemModel","AltImportacaoCsvLoteModel","_",function(o,t,e,i,s){var r=function(){function o(a){_classCallCheck(this,o),this.campos=a,this.colunas=[],this.mapaInvalido=!1}return _createClass(o,[{key:"validarMapa",value:function(){var a=this;this.mapaInvalido=!1,this.campos.forEach(function(o){o.tipo===Object||(o.obrigatorio&&!o.coluna?(o.vinculoRequisitado=!0,a.mapaInvalido=!0):o.vinculoRequisitado=!1)})}},{key:"adicionarColuna",value:function(a,o){this.colunas.push({nome:a,numero:o+1,titulo:"Coluna "+(o+1)+" – "+a,campos:[]})}},{key:"vincular",value:function(a,o){var t=s.find(this.campos,{chave:a}),e=s.find(this.colunas,{numero:o});!t||!e||(t.coluna=o,e.campos.push(t),this.validarMapa())}},{key:"desvincular",value:function(a){var o=s.find(this.campos,{chave:a}),t=s.find(this.colunas,{numero:o.coluna});!o||!t||(s.remove(t.campos,{chave:o.chave}),o.coluna=void 0,o.regrasDeValor=void 0,this.validarMapa())}},{key:"aplicarRegrasDeValor",value:function(a){var o=this;return this.campos.forEach(function(t){if(t.tipo===Object)if(t.coluna){var e=s.find(o.colunas,{numero:t.coluna}),i=s.groupBy(a,function(a){return a[e.nome]});t.regrasDeValor=Object.keys(i).map(function(a){return{valor:a,quantidade:i[a].length,objeto:t.objetoAutoVinculo(a)}})}else t.regrasDeValor=[{valor:null,geral:!0,quantidade:a.length,objeto:null}]}),this.resumirRegrasDeValor()}},{key:"resumirRegrasDeValor",value:function(){var a=0,o=0,t=0,e=0;return this.campos.forEach(function(i){if(i.tipo===Object){if(i.coluna)i.resumoRegrasDeValor={valores:0,vinculados:0,nulosValidos:0,nulosInvalidos:0},i.regrasDeValor.forEach(function(a){!a.objeto&&i.obrigatorio?i.resumoRegrasDeValor.nulosInvalidos++:a.objeto?i.resumoRegrasDeValor.vinculados++:i.resumoRegrasDeValor.nulosValidos++,i.resumoRegrasDeValor.valores++});else{var s=!!i.regrasDeValor[0].objeto;i.resumoRegrasDeValor={valores:1,vinculados:s?1:0,nulosValidos:s||i.obrigatorio?0:1,nulosInvalidos:!s&&i.obrigatorio?1:0}}a+=i.resumoRegrasDeValor.valores,o+=i.resumoRegrasDeValor.vinculados,t+=i.resumoRegrasDeValor.nulosValidos,e+=i.resumoRegrasDeValor.nulosInvalidos}}),{valores:a,vinculados:o,nulosValidos:t,nulosInvalidos:e}}},{key:"montarLote",value:function(o,t,r){var n=this,l={nomeArquivo:t};return l=new i(l),o.forEach(function(o,t){var i=new e(t+2);n.campos.forEach(function(t){if(t.possuiVinculoOuRegraGeral()||t.obrigatorio){if(t.dado=void 0,!!t.coluna){var e=s.find(n.colunas,{numero:t.coluna});t.dado=o[e.nome]}t.validar(),t.valido||(t.obrigatorio?(i.objeto.invalido=!0,i.possuiErro=!0,i.possuiConflito=!1):!i.possuiErro&&(i.possuiConflito=!0)),t.mensagens.forEach(function(a){i.resumo.mensagens.push(a)}),i.objeto[t.chave]=t.valor,i.resumo.campos.push({valido:t.valido,chave:t.chave,dado:t.dado,referencia:t.referencia,template:a.copy(t.template)})}}),!r||!0!==r.itens[t].desconsiderado||(i.desconsiderado=!0),l.itens.push(i)}),l.resumir(),l}}]),o}();return r}])}(angular),function(a){a.module("alt.importacao-csv").factory("AltImportacaoCsvOpcoesModel",[function(){var o=function(){function o(t){_classCallCheck(this,o),this.labelTipo="",this.labelTipoSingular="",this.eventoCriacao="",this.campos=void 0,this.validarLote=void 0,this.gravarLote=void 0,this.visualizacao=!1,this.loteProcessado=void 0,a.extend(this,t),this._parseVisualizacao(),this._validarOpcoes()}return _createClass(o,[{key:"_parseVisualizacao",value:function(){this.visualizacao=!!this.visualizacao}},{key:"_validarOpcoes",value:function(){if(!this.labelTipo)throw new Error('Parametro "labelTipo" é obrigatório.');if(!this.campos)throw new Error('Parametro "campos" é obrigatório.');if(this.visualizacao){if(!this.labelTipoSingular)throw new Error('Parametro "labelTipoSingular" é obrigatório quando em visualização.');if(!this.loteProcessado)throw new Error('Parametro "loteProcessado" é obrigatório quando em visualização.')}else{if(!this.eventoCriacao)throw new Error('Parametro "eventoCriacao" é obrigatório quando em importação.');if(!this.validarLote)throw new Error('Parametro "validarLote" é obrigatório quando em importação.');if(!this.gravarLote)throw new Error('Parametro "gravarLote" é obrigatório quando em importação.')}}}]),o}();return o}])}(angular),function(a){a.module("alt.importacao-csv").factory("AltImportacaoCsvResumoItemModel",[function(){return function a(o){_classCallCheck(this,a),this.linha=o,this.status="",this.campos=[],this.mensagens=[]}}])}(angular);